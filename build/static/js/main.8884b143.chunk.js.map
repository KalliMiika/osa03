{"version":3,"sources":["components/person.js","components/persons.js","components/errorMessage.js","app.js","index.js"],"names":["Person","person","name","number","Persons","persons","searchKey","personsToShow","filter","toLowerCase","includes","map","key","id","ErrorMessage","errorMessage","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setSearchKey","setErrorMessage","useEffect","console","log","axios","get","then","response","data","value","onChange","event","target","onSubmit","preventDefault","personObject","post","body","error","put","changedPerson","concat","catch","type","res","ReactDOM","render","document","getElementById"],"mappings":"uPAUeA,EARA,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACd,OACE,6BACGA,EAAOC,KADV,IACiBD,EAAOE,SCUfC,EAZC,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,UAClBC,EAAgBF,EAAQG,QAAO,SAAAP,GAAM,OAAIA,EAAOC,KAAKO,cAAcC,SAASJ,EAAUG,kBAE5F,OACI,oCACCF,EAAcI,KAAI,SAAAV,GAAM,OACvB,kBAAC,EAAD,CAAQW,IAAKX,EAAOY,GAAIZ,OAAQA,SCQ3Ba,EAfM,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aACtB,MAAoB,KAAjBA,EAEC,6BACGA,GAKH,sCC6FSC,EAjGH,WAAO,IAAD,EAEeC,mBAAS,IAFxB,mBAERZ,EAFQ,KAECa,EAFD,OAGgBD,mBAAS,IAHzB,mBAGRE,EAHQ,KAGCC,EAHD,OAIoBH,mBAAS,IAJ7B,mBAIRI,EAJQ,KAIGC,EAJH,OAKoBL,mBAAS,IAL7B,mBAKRX,EALQ,KAKGiB,EALH,OAM0BN,mBAAS,IANnC,mBAMRF,EANQ,KAMMS,EANN,KAkBhBC,qBAVa,WACXC,QAAQC,IAAI,UACZC,IACGC,IAbS,gBAcTC,MAAK,SAAAC,GACJL,QAAQC,IAAI,qBACZT,EAAWa,EAASC,WAIV,IA6ChB,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcjB,aAAcA,IAF9B,aAIE,2BACEkB,MAAO3B,EACP4B,SA1CwB,SAACC,GAC7BT,QAAQC,IAAIQ,EAAMC,OAAOlC,KAAM,KAAMiC,EAAMC,OAAOH,OAClDV,EAAaY,EAAMC,OAAOH,UA0CxB,yCACA,0BAAMI,SAxCQ,SAACF,GACjBA,EAAMG,iBACNd,EAAgB,IACd,IAAMe,EAAe,CACnBrC,KAAMiB,EACNhB,OAAQkB,GAEVO,IACGY,KA3CO,eA2COD,GACdT,MAAK,SAAAC,GACJL,QAAQC,IAAII,GACZ,IAAMU,EAAOV,EAASC,KACH,8CAAfS,EAAKC,MACPd,IACGe,IADH,UAhDI,eAgDJ,YACqBF,EAAK5B,IAAM0B,GAC7BT,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QAC1BF,MAAK,SAAAc,GACJ1B,EAAWb,EAAQM,KAAI,SAAAV,GAAM,OAAIA,EAAOY,KAAO4B,EAAK5B,GAAKZ,EAAS2C,SAGtE1B,EAAWb,EAAQwC,OAAON,OAG7BO,OAAM,SAAAJ,GACLlB,EAAgBkB,EAAMX,SAASC,KAAKU,UAExCtB,EAAW,IACXE,EAAa,MAcT,qCAEE,2BACEW,MAAOd,EACPe,SA1Da,SAACC,GACtBT,QAAQC,IAAIQ,EAAMC,OAAOlC,KAAM,KAAMiC,EAAMC,OAAOH,OAClDb,EAAWe,EAAMC,OAAOH,WA2DpB,uCAEE,2BACEA,MAAOZ,EACPa,SA7De,SAACC,GAC1BT,QAAQC,IAAIQ,EAAMC,OAAOlC,KAAM,KAAMiC,EAAMC,OAAOH,OAClDX,EAAaa,EAAMC,OAAOH,WA8DpB,4BAAQc,KAAK,UAAb,QAEJ,uCACA,kBAAC,EAAD,CAAS1C,QAASA,EAASC,UAAWA,MC3F5CsB,IAAMC,IAAI,gBAAgBC,MAAK,SAAAkB,GAC3B,IAAM3C,EAAU2C,EAAIhB,KACpBiB,IAASC,OACL,kBAAC,EAAD,CAAK7C,QAASA,IACd8C,SAASC,eAAe,c","file":"static/js/main.8884b143.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Person = ({ person }) => {\r\n    return(\r\n      <div>\r\n        {person.name} {person.number}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react';\r\nimport Person from './person'\r\n\r\nconst Persons = ({ persons, searchKey }) => {\r\n    const personsToShow = persons.filter(person => person.name.toLowerCase().includes(searchKey.toLowerCase()))\r\n\r\n    return(\r\n        <>\r\n        {personsToShow.map(person => \r\n          <Person key={person.id} person={person}/>\r\n        )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react';\r\n\r\nconst ErrorMessage = ({ errorMessage }) => {\r\n  if(errorMessage !== ''){\r\n    return(\r\n      <div>\r\n        {errorMessage}\r\n      </div>\r\n    )\r\n  } else {\r\n    return(\r\n      <>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ErrorMessage","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport Persons from './components/persons'\r\nimport ErrorMessage from './components/errorMessage'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst App = () => {\r\n  \r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchKey, setSearchKey ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState('')\r\n\r\n  const hook = () => {\r\n    console.log('effect')\r\n    axios\r\n      .get(baseUrl)\r\n      .then(response => {\r\n        console.log('promise fulfilled')\r\n        setPersons(response.data)\r\n      })\r\n  }\r\n\r\n  useEffect(hook, [])\r\n\r\n  const handleNameChange = (event) => {\r\n      console.log(event.target.name, ': ', event.target.value)\r\n      setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.name, ': ', event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleSearchKeyChange = (event) => {\r\n    console.log(event.target.name, ': ', event.target.value)\r\n    setSearchKey(event.target.value)\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    setErrorMessage('')\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      axios\r\n        .post(baseUrl, personObject)\r\n        .then(response => {\r\n          console.log(response)\r\n          const body = response.data\r\n          if (body.error === 'HÄLYTYS TÄÄLLÄ TAPAHTUI VIRHE') {\r\n            axios\r\n              .put(`${baseUrl}/${body.id}`, personObject)\r\n              .then(response => response.data)\r\n              .then(changedPerson => {\r\n                setPersons(persons.map(person => person.id !== body.id ? person : changedPerson))\r\n              })\r\n          } else {\r\n            setPersons(persons.concat(personObject))\r\n          }\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(error.response.data.error)\r\n        })\r\n      setNewName('')\r\n      setNewNumber('')\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <ErrorMessage errorMessage={errorMessage} />\r\n      filter by: \r\n      <input\r\n        value={searchKey}\r\n        onChange={handleSearchKeyChange}\r\n       />\r\n      <h2>Add a new</h2>\r\n      <form onSubmit={addPerson}>\r\n          <div>\r\n            name: \r\n            <input\r\n              value={newName}\r\n              onChange={handleNameChange}\r\n            />\r\n          </div>\r\n          <div>\r\n            number: \r\n            <input\r\n              value={newNumber}\r\n              onChange={handleNumberChange}\r\n            />\r\n          </div>\r\n          <button type=\"submit\">add</button>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} searchKey={searchKey}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\n\nimport axios from 'axios'\n\naxios.get('/api/persons').then(res => {\n    const persons = res.data\n    ReactDOM.render(\n        <App persons={persons} />,\n        document.getElementById('root')\n    )\n})\n"],"sourceRoot":""}